<!DOCTYPE html>
<html>
<head>
<title></title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/Blogger_icon_2017.svg.png" width="15%">
</div>
<p>这篇博文介绍了Blogger添加主页底部的分页导航组件，替换之前的&quot;更多博文&quot;按钮，以方便浏览阅读。</br></p>
<!-- more -->
<p><meting-js
	server="netease"
	type="song"
	id="407902">
</meting-js></p>
<p><strong>TOC</strong></p>
<!-- TOC -->
<ul>
<li><a href="#1-%E5%85%B3%E4%BA%8Eblogger%E8%87%AA%E5%8A%A8%E5%88%86%E9%A1%B5auto-pagination">1. 关于Blogger自动分页(Auto Pagination)</a></li>
<li><a href="#2-%E6%9B%B4%E6%8D%A2%E5%88%86%E9%A1%B5%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6">2. 更换分页导航组件</a>
<ul>
<li><a href="#21-%E6%B7%BB%E5%8A%A0css">2.1 添加css</a></li>
<li><a href="#22-%E6%B7%BB%E5%8A%A0script">2.2 添加script</a></li>
<li><a href="#23-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE">2.3 参数配置</a></li>
</ul>
</li>
<li><a href="#%E5%8F%82%E8%80%83references">参考(References)</a></li>
</ul>
<!-- /TOC -->
<p><a id="markdown-1-关于blogger自动分页auto-pagination" name="1-关于blogger自动分页auto-pagination"></a></p>
<h2 id="1-%E5%85%B3%E4%BA%8Eblogger%E8%87%AA%E5%8A%A8%E5%88%86%E9%A1%B5auto-pagination">1. 关于Blogger自动分页(Auto Pagination)</h2>
<hr>
<p>Blogger的官方自动分页机制(Auto Pagination)是一个历史遗留问题，据官方博客的解释是为了加速博客的浏览以及降低延迟，具体可以参阅这份官方博文：<a href="https://blogger.googleblog.com/2010/02/auto-pagination-on-blogger.html?m=1">「Auto Pagination on Blogger」</a></p>
<blockquote>
<p>Latency is a word you hear a lot at Google. We are always looking for ways to make our products faster, because we have consistently found that faster page loads mean more satisfied users. This post is the first of an occasional series that will discuss ways in which we’re working to make blogs load faster for all users. --Vardhman Jain, Software Engineer, Mountain View</p>
</blockquote>
<p>因此，Blogger的自动分页机制导致底部的分页导航组件只有一个简单&quot;更多博文&quot;按钮。</p>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/heirenwenhao.png" width="50%">
</div>
<p>当你们博客主页的博文数超过页面展示上限数时，底部会出现以下分页导航按钮：</p>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/autopage1.png" width="100%">
</div>
<p>虽然谷歌Blogger的工程师吹说为了加速浏览体验和降低延迟，但这个机制从2010年提出使用后，截至2019年已经被喷了9年了，那么截至现在就是被喷10年了...</p>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/autopage2.png" width="100%">
</div>
<p><a id="markdown-2-更换分页导航组件" name="2-更换分页导航组件"></a></p>
<h2 id="2-%E6%9B%B4%E6%8D%A2%E5%88%86%E9%A1%B5%E5%AF%BC%E8%88%AA%E7%BB%84%E4%BB%B6">2. 更换分页导航组件</h2>
<hr>
<p>采用这篇博文作者提供的分页导航组件：<a href="https://helplogger.blogspot.com/2014/04/how-to-add-numbered-page-navigation-widget-for-blogger.html">「How To Add Numbered Page Navigation Widget For Blogger」</a></p>
<p><a id="markdown-21-添加css" name="21-添加css"></a></p>
<h3 id="21-%E6%B7%BB%E5%8A%A0css">2.1 添加css</h3>
<p>在范本XML中搜索<code>]]&gt;&lt;/b:skin&gt;</code>，并且在该标签前添加css样式，具体的css样式作者提供了7种，可按个人需要选择：<a href="https://helplogger.blogspot.com/2014/04/how-to-add-numbered-page-navigation-widget-for-blogger.html">&gt;&gt;&gt;css样式传送门&gt;&gt;&gt;</a></p>
<p>例如灰色标签蓝色页码的样式：</p>
<pre class="hljs"><code><div><span class="hljs-selector-id">#blog-pager</span>{<span class="hljs-attribute">clear</span>:both;<span class="hljs-attribute">margin</span>:<span class="hljs-number">30px</span> auto;<span class="hljs-attribute">text-align</span>:center; <span class="hljs-attribute">padding</span>: <span class="hljs-number">7px</span>;}
<span class="hljs-selector-class">.blog-pager</span> {<span class="hljs-attribute">background</span>: none;}
<span class="hljs-selector-class">.displaypageNum</span> <span class="hljs-selector-tag">a</span>,<span class="hljs-selector-class">.showpage</span> <span class="hljs-selector-tag">a</span>,<span class="hljs-selector-class">.pagecurrent</span>{<span class="hljs-attribute">font-size</span>: <span class="hljs-number">14px</span>;<span class="hljs-attribute">padding</span>: <span class="hljs-number">5px</span> <span class="hljs-number">12px</span>;<span class="hljs-attribute">margin-right</span>:<span class="hljs-number">5px</span>; <span class="hljs-attribute">color</span>: <span class="hljs-number">#666</span>; <span class="hljs-attribute">background-color</span>:<span class="hljs-number">#eee</span>;}
<span class="hljs-selector-class">.displaypageNum</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>,<span class="hljs-selector-class">.showpage</span> <span class="hljs-selector-tag">a</span><span class="hljs-selector-pseudo">:hover</span>, <span class="hljs-selector-class">.pagecurrent</span>{<span class="hljs-attribute">background</span>:<span class="hljs-number">#359BED</span>;<span class="hljs-attribute">text-decoration</span>:none;<span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;}
<span class="hljs-selector-id">#blog-pager</span> <span class="hljs-selector-class">.pagecurrent</span>{<span class="hljs-attribute">font-weight</span>:bold;<span class="hljs-attribute">color</span>: <span class="hljs-number">#fff</span>;<span class="hljs-attribute">background</span>:<span class="hljs-number">#359BED</span>;}
 <span class="hljs-selector-class">.showpageOf</span>{<span class="hljs-attribute">display</span>:none<span class="hljs-meta">!important</span>}
<span class="hljs-selector-id">#blog-pager</span> <span class="hljs-selector-class">.pages</span>{<span class="hljs-attribute">border</span>:none;}
</div></code></pre>
<p>效果：</p>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/numberedpage1.png" width="100%">
</div>
<p>另外，如果需要隐藏&quot;First&quot;和&quot;Last&quot;按钮，在上面代码的最后加上：</p>
<pre class="hljs"><code><div><span class="hljs-selector-class">.firstpage</span>, <span class="hljs-selector-class">.lastpage</span> {<span class="hljs-attribute">display</span>: none;}
</div></code></pre>
<p><a id="markdown-22-添加script" name="22-添加script"></a></p>
<h3 id="22-%E6%B7%BB%E5%8A%A0script">2.2 添加script</h3>
<p>在范本XML中搜索<code>&lt;/body&gt;</code>，在该标签前添加以下脚本：</p>
<pre class="hljs"><code><div><span class="hljs-tag">&lt;<span class="hljs-name">b:if</span> <span class="hljs-attr">cond</span>=<span class="hljs-string">'data:blog.pageType != <span class="hljs-symbol">&amp;quot;</span>item<span class="hljs-symbol">&amp;quot;</span>'</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">b:if</span> <span class="hljs-attr">cond</span>=<span class="hljs-string">'data:blog.pageType != <span class="hljs-symbol">&amp;quot;</span>static_page<span class="hljs-symbol">&amp;quot;</span>'</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">'text/javascript'</span>&gt;</span><span class="javascript">
  <span class="hljs-comment">/*&lt;![CDATA[*/</span>
    <span class="hljs-keyword">var</span> perPage=<span class="hljs-number">3</span>;
    <span class="hljs-keyword">var</span> numPages=<span class="hljs-number">3</span>;
    <span class="hljs-keyword">var</span> firstText =<span class="hljs-string">'First'</span>;
    <span class="hljs-keyword">var</span> lastText =<span class="hljs-string">'Last'</span>;
    <span class="hljs-keyword">var</span> prevText =<span class="hljs-string">'« Previous'</span>;
    <span class="hljs-keyword">var</span> nextText =<span class="hljs-string">'Next »'</span>;
    <span class="hljs-keyword">var</span> urlactivepage=location.href;
    <span class="hljs-keyword">var</span> home_page=<span class="hljs-string">"/"</span>;

<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> firstText==<span class="hljs-string">"undefined"</span>)firstText=<span class="hljs-string">"First"</span>;<span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> lastText==<span class="hljs-string">"undefined"</span>)lastText=<span class="hljs-string">"Last"</span>;<span class="hljs-keyword">var</span> noPage;<span class="hljs-keyword">var</span> currentPage;<span class="hljs-keyword">var</span> currentPageNo;<span class="hljs-keyword">var</span> postLabel;pagecurrentg();<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">looppagecurrentg</span>(<span class="hljs-params">pageInfo</span>)</span>{<span class="hljs-keyword">var</span> html=<span class="hljs-string">''</span>;pageNumber=<span class="hljs-built_in">parseInt</span>(numPages / <span class="hljs-number">2</span>);<span class="hljs-keyword">if</span>(pageNumber==numPages-pageNumber){numPages=pageNumber*<span class="hljs-number">2</span>+<span class="hljs-number">1</span>}
pageStart=currentPageNo-pageNumber;<span class="hljs-keyword">if</span>(pageStart&lt;<span class="hljs-number">1</span>)pageStart=<span class="hljs-number">1</span>;lastPageNo=<span class="hljs-built_in">parseInt</span>(pageInfo / perPage)+<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(lastPageNo<span class="hljs-number">-1</span>==pageInfo / perPage)lastPageNo=lastPageNo<span class="hljs-number">-1</span>;pageEnd=pageStart+numPages<span class="hljs-number">-1</span>;<span class="hljs-keyword">if</span>(pageEnd&gt;lastPageNo)pageEnd=lastPageNo;html+=<span class="hljs-string">"&lt;span class='showpageOf'&gt;Page "</span>+currentPageNo+<span class="hljs-string">' of '</span>+lastPageNo+<span class="hljs-string">"&lt;/span&gt;"</span>;<span class="hljs-keyword">var</span> prevNumber=<span class="hljs-built_in">parseInt</span>(currentPageNo)<span class="hljs-number">-1</span>;<span class="hljs-keyword">if</span>(currentPageNo&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="showpage firstpage"&gt;&lt;a href="'</span>+home_page+<span class="hljs-string">'"&gt;'</span>+firstText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum firstpage"&gt;&lt;a href="/search/label/'</span>+postLabel+<span class="hljs-string">'?&amp;max-results='</span>+perPage+<span class="hljs-string">'"&gt;'</span>+firstText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}
<span class="hljs-keyword">if</span>(currentPageNo&gt;<span class="hljs-number">2</span>){<span class="hljs-keyword">if</span>(currentPageNo==<span class="hljs-number">3</span>){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="showpage"&gt;&lt;a href="'</span>+home_page+<span class="hljs-string">'"&gt;'</span>+prevText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="/search/label/'</span>+postLabel+<span class="hljs-string">'?&amp;max-results='</span>+perPage+<span class="hljs-string">'"&gt;'</span>+prevText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectpage('</span>+prevNumber+<span class="hljs-string">');return false"&gt;'</span>+prevText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectlabel('</span>+prevNumber+<span class="hljs-string">');return false"&gt;'</span>+prevText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}}
<span class="hljs-keyword">if</span>(pageStart&gt;<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="'</span>+home_page+<span class="hljs-string">'"&gt;1&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="/search/label/'</span>+postLabel+<span class="hljs-string">'?&amp;max-results='</span>+perPage+<span class="hljs-string">'"&gt;1&lt;/a&gt;&lt;/span&gt;'</span>}}
<span class="hljs-keyword">if</span>(pageStart&gt;<span class="hljs-number">2</span>){html+=<span class="hljs-string">' ... '</span>}
<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> jj=pageStart;jj&lt;=pageEnd;jj++){<span class="hljs-keyword">if</span>(currentPageNo==jj){html+=<span class="hljs-string">'&lt;span class="pagecurrent"&gt;'</span>+jj+<span class="hljs-string">'&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(jj==<span class="hljs-number">1</span>){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="'</span>+home_page+<span class="hljs-string">'"&gt;1&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="/search/label/'</span>+postLabel+<span class="hljs-string">'?&amp;max-results='</span>+perPage+<span class="hljs-string">'"&gt;1&lt;/a&gt;&lt;/span&gt;'</span>}}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectpage('</span>+jj+<span class="hljs-string">');return false"&gt;'</span>+jj+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectlabel('</span>+jj+<span class="hljs-string">');return false"&gt;'</span>+jj+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}}
<span class="hljs-keyword">if</span>(pageEnd&lt;lastPageNo<span class="hljs-number">-1</span>){html+=<span class="hljs-string">'...'</span>}
<span class="hljs-keyword">if</span>(pageEnd&lt;lastPageNo){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectpage('</span>+lastPageNo+<span class="hljs-string">');return false"&gt;'</span>+lastPageNo+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectlabel('</span>+lastPageNo+<span class="hljs-string">');return false"&gt;'</span>+lastPageNo+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}
<span class="hljs-keyword">var</span> nextnumber=<span class="hljs-built_in">parseInt</span>(currentPageNo)+<span class="hljs-number">1</span>;<span class="hljs-keyword">if</span>(currentPageNo&lt;(lastPageNo<span class="hljs-number">-1</span>)){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectpage('</span>+nextnumber+<span class="hljs-string">');return false"&gt;'</span>+nextText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum"&gt;&lt;a href="#" onclick="redirectlabel('</span>+nextnumber+<span class="hljs-string">');return false"&gt;'</span>+nextText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}
<span class="hljs-keyword">if</span>(currentPageNo&lt;lastPageNo){<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){html+=<span class="hljs-string">'&lt;span class="displaypageNum lastpage"&gt;&lt;a href="#" onclick="redirectpage('</span>+lastPageNo+<span class="hljs-string">');return false"&gt;'</span>+lastText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}<span class="hljs-keyword">else</span>{html+=<span class="hljs-string">'&lt;span class="displaypageNum lastpage"&gt;&lt;a href="#" onclick="redirectlabel('</span>+lastPageNo+<span class="hljs-string">');return false"&gt;'</span>+lastText+<span class="hljs-string">'&lt;/a&gt;&lt;/span&gt;'</span>}}
<span class="hljs-keyword">var</span> pageArea=<span class="hljs-built_in">document</span>.getElementsByName(<span class="hljs-string">"pageArea"</span>);<span class="hljs-keyword">var</span> blogPager=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">"blog-pager"</span>);<span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> p=<span class="hljs-number">0</span>;p&lt;pageArea.length;p++){pageArea[p].innerHTML=html}
<span class="hljs-keyword">if</span>(pageArea&amp;&amp;pageArea.length&gt;<span class="hljs-number">0</span>){html=<span class="hljs-string">''</span>}
<span class="hljs-keyword">if</span>(blogPager){blogPager.innerHTML=html}}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">totalcountdata</span>(<span class="hljs-params">root</span>)</span>{<span class="hljs-keyword">var</span> feed=root.feed;<span class="hljs-keyword">var</span> totaldata=<span class="hljs-built_in">parseInt</span>(feed.openSearch$totalResults.$t,<span class="hljs-number">10</span>);looppagecurrentg(totaldata)}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">pagecurrentg</span>(<span class="hljs-params"></span>)</span>{<span class="hljs-keyword">var</span> thisUrl=urlactivepage;<span class="hljs-keyword">if</span>(thisUrl.indexOf(<span class="hljs-string">"/search/label/"</span>)!=<span class="hljs-number">-1</span>){<span class="hljs-keyword">if</span>(thisUrl.indexOf(<span class="hljs-string">"?updated-max"</span>)!=<span class="hljs-number">-1</span>){postLabel=thisUrl.substring(thisUrl.indexOf(<span class="hljs-string">"/search/label/"</span>)+<span class="hljs-number">14</span>,thisUrl.indexOf(<span class="hljs-string">"?updated-max"</span>))}<span class="hljs-keyword">else</span>{postLabel=thisUrl.substring(thisUrl.indexOf(<span class="hljs-string">"/search/label/"</span>)+<span class="hljs-number">14</span>,thisUrl.indexOf(<span class="hljs-string">"?&amp;max"</span>))}}
<span class="hljs-keyword">if</span>(thisUrl.indexOf(<span class="hljs-string">"?q="</span>)==<span class="hljs-number">-1</span>&amp;&amp;thisUrl.indexOf(<span class="hljs-string">".html"</span>)==<span class="hljs-number">-1</span>){<span class="hljs-keyword">if</span>(thisUrl.indexOf(<span class="hljs-string">"/search/label/"</span>)==<span class="hljs-number">-1</span>){currentPage=<span class="hljs-string">"page"</span>;<span class="hljs-keyword">if</span>(urlactivepage.indexOf(<span class="hljs-string">"#PageNo="</span>)!=<span class="hljs-number">-1</span>){currentPageNo=urlactivepage.substring(urlactivepage.indexOf(<span class="hljs-string">"#PageNo="</span>)+<span class="hljs-number">8</span>,urlactivepage.length)}<span class="hljs-keyword">else</span>{currentPageNo=<span class="hljs-number">1</span>}
<span class="hljs-built_in">document</span>.write(<span class="hljs-string">"&lt;script src=\""</span>+home_page+<span class="hljs-string">"feeds/posts/summary?max-results=1&amp;alt=json-in-script&amp;callback=totalcountdata\"&gt;&lt;\/script&gt;"</span>)}<span class="hljs-keyword">else</span>{currentPage=<span class="hljs-string">"label"</span>;<span class="hljs-keyword">if</span>(thisUrl.indexOf(<span class="hljs-string">"&amp;max-results="</span>)==<span class="hljs-number">-1</span>){perPage=<span class="hljs-number">20</span>}
<span class="hljs-keyword">if</span>(urlactivepage.indexOf(<span class="hljs-string">"#PageNo="</span>)!=<span class="hljs-number">-1</span>){currentPageNo=urlactivepage.substring(urlactivepage.indexOf(<span class="hljs-string">"#PageNo="</span>)+<span class="hljs-number">8</span>,urlactivepage.length)}<span class="hljs-keyword">else</span>{currentPageNo=<span class="hljs-number">1</span>}
<span class="hljs-built_in">document</span>.write(<span class="hljs-string">'&lt;script src="'</span>+home_page+<span class="hljs-string">'feeds/posts/summary/-/'</span>+postLabel+<span class="hljs-string">'?alt=json-in-script&amp;callback=totalcountdata&amp;max-results=1" &gt;&lt;\/script&gt;'</span>)}}}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redirectpage</span>(<span class="hljs-params">numberpage</span>)</span>{jsonstart=(numberpage<span class="hljs-number">-1</span>)*perPage;noPage=numberpage;<span class="hljs-keyword">var</span> nameBody=<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];<span class="hljs-keyword">var</span> newInclude=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);newInclude.type=<span class="hljs-string">'text/javascript'</span>;newInclude.setAttribute(<span class="hljs-string">"src"</span>,home_page+<span class="hljs-string">"feeds/posts/summary?start-index="</span>+jsonstart+<span class="hljs-string">"&amp;max-results=1&amp;alt=json-in-script&amp;callback=finddatepost"</span>);nameBody.appendChild(newInclude)}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redirectlabel</span>(<span class="hljs-params">numberpage</span>)</span>{jsonstart=(numberpage<span class="hljs-number">-1</span>)*perPage;noPage=numberpage;<span class="hljs-keyword">var</span> nameBody=<span class="hljs-built_in">document</span>.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];<span class="hljs-keyword">var</span> newInclude=<span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">'script'</span>);newInclude.type=<span class="hljs-string">'text/javascript'</span>;newInclude.setAttribute(<span class="hljs-string">"src"</span>,home_page+<span class="hljs-string">"feeds/posts/summary/-/"</span>+postLabel+<span class="hljs-string">"?start-index="</span>+jsonstart+<span class="hljs-string">"&amp;max-results=1&amp;alt=json-in-script&amp;callback=finddatepost"</span>);nameBody.appendChild(newInclude)}
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">finddatepost</span>(<span class="hljs-params">root</span>)</span>{post=root.feed.entry[<span class="hljs-number">0</span>];<span class="hljs-keyword">var</span> timestamp1=post.published.$t.substring(<span class="hljs-number">0</span>,<span class="hljs-number">19</span>)+post.published.$t.substring(<span class="hljs-number">23</span>,<span class="hljs-number">29</span>);<span class="hljs-keyword">var</span> timestamp=<span class="hljs-built_in">encodeURIComponent</span>(timestamp1);<span class="hljs-keyword">if</span>(currentPage==<span class="hljs-string">"page"</span>){<span class="hljs-keyword">var</span> pAddress=<span class="hljs-string">"/search?updated-max="</span>+timestamp+<span class="hljs-string">"&amp;max-results="</span>+perPage+<span class="hljs-string">"#PageNo="</span>+noPage}<span class="hljs-keyword">else</span>{<span class="hljs-keyword">var</span> pAddress=<span class="hljs-string">"/search/label/"</span>+postLabel+<span class="hljs-string">"?updated-max="</span>+timestamp+<span class="hljs-string">"&amp;max-results="</span>+perPage+<span class="hljs-string">"#PageNo="</span>+noPage}
location.href=pAddress}

  <span class="hljs-comment">/*]]&gt;*/</span>
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">b:if</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">b:if</span>&gt;</span>
</div></code></pre>
<p><a id="markdown-23-参数配置" name="23-参数配置"></a></p>
<h3 id="23-%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE">2.3 参数配置</h3>
<p>以下是该分页导航组件可配置的参数以及意义：</p>
<pre class="hljs"><code><div>perPage: 5, //单页博文数目的上限
numPages: 5, //分页导航组件显示的页数
var firstText ='First'; //首页按钮显示名
var lastText ='Last'; //尾页按钮显示名
var prevText ='« Previous'; //上一页按钮显示名
var nextText ='Next »'; //下一页按钮显示名
</div></code></pre>
<p>注意，关于参数项<code>perPage</code>的设置，需要与Blogger后台设置的上限数一致：</p>
<ol>
<li>
<p>博文&quot;最多显示&quot;设置： </br>
在Blogger后台选择设置-&gt;博文、评论和分享-&gt;博文中，设置&quot;最多显示&quot;与<code>perPage</code>一致：</p>
<div align=center>
 <img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/numberedpage2.png" width="100%">
</li>
</ol>
</div>
<ol start="2">
<li>
<p>博文小工具&quot;主页上的博文数&quot;设置： </br>
在Blogger后台选择布局-&gt;页面主体-&gt;博文-&gt;主页选项中，设置&quot;主页上的博文数&quot;与<code>perPage</code>一致：</p>
<div align=center>
 <img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/numberedpage3.png" width="100%">
</li>
</ol>
</div>
<p>最终的效果类似下图：</p>
<div align=center>
	<img src="https://cdn.jsdelivr.net/gh/singularTnT/Image-Host@master/Blogger/assets/numberedpage4.png" width="100%">
</div>
<p>可以看出替换后的博客页面更便于浏览，这本是正常网页具备的基础功能，但是由于Auto Pagination的反人类机制导致博文数量较多时翻阅很不方便。</p>
<p>另外，分页导航组件的css和js文件可以打包上传对象存储空间配合CDN实现加速加载。</p>
<p><a id="markdown-参考references" name="参考references"></a></p>
<h2 id="%E5%8F%82%E8%80%83references">参考(References)</h2>
<hr>
<ul>
<li><a href="https://blogger.googleblog.com/2010/02/auto-pagination-on-blogger.html?m=1">Auto Pagination on Blogger</a> </br></li>
<li><a href="https://helplogger.blogspot.com/2014/04/how-to-add-numbered-page-navigation-widget-for-blogger.html">How To Add Numbered Page Navigation Widget For Blogger</a> </br></li>
</ul>
<!-- require APlayer -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
<!-- require MetingJS -->
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
</body>
</html>
